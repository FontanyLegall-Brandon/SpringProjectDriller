{"author_date": "2015-11-06 12:01:59+01:00", "msg": "Register hazelcast post processor only when necessary\n\nCommit 8e0a94f introduced a post processor that adds an explicit link\nbetween the `HazelcastInstance` and the `EntityManagerFactory` so that\nHazelcast is fully initialized before Hibernate actually kicks in.\n\nUnfortunately, the conditions that were implemented to register this post\nprocessor are wrong and any app that has both JPA and Hazelcast support\nblows up if no bean with name `hazelcastInstance` is defined.\n\nThis commit fixes the situation and reworks the configuration in a\nseparate auto-configuration that runs after the Hazelcast and JPA support\nand check both the presence of an `EntityManagerFactory` and a bean of\nname `hazelcastInstance`. If any of those conditions does not apply the\npost processor is no longer registered.\n\nCloses gh-4158"}